var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
import { Component, ObservableComponent } from '../ecs/Component';
import { uuidEventSystem } from './Systems';
import { CLASS_ID, OnUUIDEvent, OnPointerUUIDEvent } from './Components';
/**
 * @public
 */
var OnFocus = /** @class */ (function (_super) {
    __extends(OnFocus, _super);
    function OnFocus(callback) {
        var _this = _super.call(this, callback) || this;
        _this.type = 'onFocus';
        // This injection is necessary ONLY in events that are ALWAYS turned on and are
        // not assignable to entities. Like events for the UI elements
        // TODO(Brian): This will be removed when UI gets back to the entity parenting.
        uuidEventSystem.handlerMap[_this.uuid] = _this;
        return _this;
    }
    __decorate([
        ObservableComponent.readonly,
        __metadata("design:type", String)
    ], OnFocus.prototype, "type", void 0);
    OnFocus = __decorate([
        Component('engine.onFocus', CLASS_ID.UUID_CALLBACK),
        __metadata("design:paramtypes", [Function])
    ], OnFocus);
    return OnFocus;
}(OnUUIDEvent));
export { OnFocus };
/**
 * @public
 */
var OnTextSubmit = /** @class */ (function (_super) {
    __extends(OnTextSubmit, _super);
    function OnTextSubmit(callback) {
        var _this = _super.call(this, callback) || this;
        _this.type = 'onTextSubmit';
        // This injection is necessary ONLY in events that are ALWAYS turned on and are
        // not assignable to entities. Like events for the UI elements
        // TODO(Brian): This will be removed when UI gets back to the entity parenting.
        uuidEventSystem.handlerMap[_this.uuid] = _this;
        return _this;
    }
    __decorate([
        ObservableComponent.readonly,
        __metadata("design:type", String)
    ], OnTextSubmit.prototype, "type", void 0);
    OnTextSubmit = __decorate([
        Component('engine.onTextSubmit', CLASS_ID.UUID_CALLBACK),
        __metadata("design:paramtypes", [Function])
    ], OnTextSubmit);
    return OnTextSubmit;
}(OnUUIDEvent));
export { OnTextSubmit };
/**
 * @public
 */
var OnBlur = /** @class */ (function (_super) {
    __extends(OnBlur, _super);
    function OnBlur(callback) {
        var _this = _super.call(this, callback) || this;
        _this.type = 'onBlur';
        // This injection is necessary ONLY in events that are ALWAYS turned on and are
        // not assignable to entities. Like events for the UI elements
        // TODO(Brian): This will be removed when UI gets back to the entity parenting.
        uuidEventSystem.handlerMap[_this.uuid] = _this;
        return _this;
    }
    __decorate([
        ObservableComponent.readonly,
        __metadata("design:type", String)
    ], OnBlur.prototype, "type", void 0);
    OnBlur = __decorate([
        Component('engine.onBlur', CLASS_ID.UUID_CALLBACK),
        __metadata("design:paramtypes", [Function])
    ], OnBlur);
    return OnBlur;
}(OnUUIDEvent));
export { OnBlur };
/**
 * @public
 */
var OnEnter = /** @class */ (function (_super) {
    __extends(OnEnter, _super);
    function OnEnter(callback) {
        var _this = _super.call(this, callback) || this;
        _this.type = 'onEnter';
        // This injection is necessary ONLY in events that are ALWAYS turned on and are
        // not assignable to entities. Like events for the UI elements
        // TODO(Brian): This will be removed when UI gets back to the entity parenting.
        uuidEventSystem.handlerMap[_this.uuid] = _this;
        return _this;
    }
    __decorate([
        ObservableComponent.readonly,
        __metadata("design:type", String)
    ], OnEnter.prototype, "type", void 0);
    OnEnter = __decorate([
        Component('engine.onEnter', CLASS_ID.UUID_CALLBACK),
        __metadata("design:paramtypes", [Function])
    ], OnEnter);
    return OnEnter;
}(OnUUIDEvent));
export { OnEnter };
/**
 * @public
 */
var OnChanged = /** @class */ (function (_super) {
    __extends(OnChanged, _super);
    function OnChanged(callback) {
        var _this = _super.call(this, callback) || this;
        _this.type = 'onChange';
        // This injection is necessary ONLY in events that are ALWAYS turned on and are
        // not assignable to entities. Like events for the UI elements
        // TODO(Brian): This will be removed when UI gets back to the entity parenting.
        uuidEventSystem.handlerMap[_this.uuid] = _this;
        return _this;
    }
    __decorate([
        ObservableComponent.readonly,
        __metadata("design:type", String)
    ], OnChanged.prototype, "type", void 0);
    OnChanged = __decorate([
        Component('engine.onChange', CLASS_ID.UUID_CALLBACK),
        __metadata("design:paramtypes", [Function])
    ], OnChanged);
    return OnChanged;
}(OnUUIDEvent));
export { OnChanged };
/**
 * @public @deprecated use `OnPointerDown` instead
 */
var OnClick = /** @class */ (function (_super) {
    __extends(OnClick, _super);
    function OnClick(callback, options) {
        var _this = _super.call(this, callback) || this;
        _this.type = 'onClick';
        // This injection is necessary ONLY in events that are ALWAYS turned on and are
        // not assignable to entities. Like events for the UI elements
        // TODO(Brian): This will be removed when UI gets back to the entity parenting.
        uuidEventSystem.handlerMap[_this.uuid] = _this;
        if (options) {
            _this.showFeedback = !(options.showFeedback === false);
            if (options.button) {
                _this.button = options.button;
            }
            if (options.hoverText) {
                _this.hoverText = options.hoverText;
            }
            if (options.distance) {
                _this.distance = options.distance;
            }
        }
        return _this;
    }
    __decorate([
        ObservableComponent.readonly,
        __metadata("design:type", String)
    ], OnClick.prototype, "type", void 0);
    OnClick = __decorate([
        Component('engine.onClick', CLASS_ID.UUID_CALLBACK),
        __metadata("design:paramtypes", [Function, Object])
    ], OnClick);
    return OnClick;
}(OnPointerUUIDEvent));
export { OnClick };
/**
 * @public
 */
var OnPointerDown = /** @class */ (function (_super) {
    __extends(OnPointerDown, _super);
    function OnPointerDown(callback, options) {
        var _this = _super.call(this, callback) || this;
        _this.type = 'pointerDown';
        // This injection is necessary ONLY in events that are ALWAYS turned on and are
        // not assignable to entities. Like events for the UI elements
        // TODO(Brian): This will be removed when UI gets back to the entity parenting.
        uuidEventSystem.handlerMap[_this.uuid] = _this;
        if (options) {
            _this.showFeedback = !(options.showFeedback === false);
            if (options.button) {
                _this.button = options.button;
            }
            if (options.hoverText) {
                _this.hoverText = options.hoverText;
            }
            if (options.distance) {
                _this.distance = options.distance;
            }
        }
        return _this;
    }
    __decorate([
        ObservableComponent.readonly,
        __metadata("design:type", String)
    ], OnPointerDown.prototype, "type", void 0);
    OnPointerDown = __decorate([
        Component('engine.pointerDown', CLASS_ID.UUID_CALLBACK),
        __metadata("design:paramtypes", [Function, Object])
    ], OnPointerDown);
    return OnPointerDown;
}(OnPointerUUIDEvent));
export { OnPointerDown };
/**
 * @public
 */
var OnPointerUp = /** @class */ (function (_super) {
    __extends(OnPointerUp, _super);
    function OnPointerUp(callback, options) {
        var _this = _super.call(this, callback) || this;
        _this.type = 'pointerUp';
        // This injection is necessary ONLY in events that are ALWAYS turned on and are
        // not assignable to entities. Like events for the UI elements
        // TODO(Brian): This will be removed when UI gets back to the entity parenting.
        uuidEventSystem.handlerMap[_this.uuid] = _this;
        if (options) {
            _this.showFeedback = !(options.showFeedback === false);
            if (options.button) {
                _this.button = options.button;
            }
            if (options.hoverText) {
                _this.hoverText = options.hoverText;
            }
            if (options.distance) {
                _this.distance = options.distance;
            }
        }
        return _this;
    }
    __decorate([
        ObservableComponent.readonly,
        __metadata("design:type", String)
    ], OnPointerUp.prototype, "type", void 0);
    OnPointerUp = __decorate([
        Component('engine.pointerUp', CLASS_ID.UUID_CALLBACK),
        __metadata("design:paramtypes", [Function, Object])
    ], OnPointerUp);
    return OnPointerUp;
}(OnPointerUUIDEvent));
export { OnPointerUp };
/**
 * @public
 */
var OnPointerHoverEnter = /** @class */ (function (_super) {
    __extends(OnPointerHoverEnter, _super);
    function OnPointerHoverEnter(callback, options) {
        var _this = _super.call(this, callback) || this;
        _this.type = 'pointerHoverEnter';
        // This injection is necessary ONLY in events that are ALWAYS turned on and are
        // not assignable to entities. Like events for the UI elements
        // TODO(Brian): This will be removed when UI gets back to the entity parenting.
        uuidEventSystem.handlerMap[_this.uuid] = _this;
        if (options) {
            if (options.distance) {
                _this.distance = options.distance;
            }
        }
        return _this;
    }
    __decorate([
        ObservableComponent.readonly,
        __metadata("design:type", String)
    ], OnPointerHoverEnter.prototype, "type", void 0);
    OnPointerHoverEnter = __decorate([
        Component('engine.pointerHoverEnter', CLASS_ID.UUID_CALLBACK),
        __metadata("design:paramtypes", [Function, Object])
    ], OnPointerHoverEnter);
    return OnPointerHoverEnter;
}(OnPointerUUIDEvent));
export { OnPointerHoverEnter };
/**
 * @public
 */
var OnPointerHoverExit = /** @class */ (function (_super) {
    __extends(OnPointerHoverExit, _super);
    function OnPointerHoverExit(callback) {
        var _this = _super.call(this, callback) || this;
        _this.type = 'pointerHoverExit';
        // This injection is necessary ONLY in events that are ALWAYS turned on and are
        // not assignable to entities. Like events for the UI elements
        // TODO(Brian): This will be removed when UI gets back to the entity parenting.
        uuidEventSystem.handlerMap[_this.uuid] = _this;
        // Changed default distance value for this component because in most cases we probably
        // don't want for the hover exit event to be limited by a distance, and it default value was too small.
        _this.distance = 160;
        return _this;
    }
    __decorate([
        ObservableComponent.readonly,
        __metadata("design:type", String)
    ], OnPointerHoverExit.prototype, "type", void 0);
    OnPointerHoverExit = __decorate([
        Component('engine.pointerHoverExit', CLASS_ID.UUID_CALLBACK),
        __metadata("design:paramtypes", [Function])
    ], OnPointerHoverExit);
    return OnPointerHoverExit;
}(OnPointerUUIDEvent));
export { OnPointerHoverExit };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVUlFdmVudHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZGVjZW50cmFsYW5kL1VJRXZlbnRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQTtBQUNqRSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBQzNDLE9BQU8sRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sY0FBYyxDQUFBO0FBR3hFOztHQUVHO0FBRUg7SUFBNkIsMkJBQXNCO0lBR2pELGlCQUFZLFFBQTZDO1FBQXpELFlBQ0Usa0JBQU0sUUFBUSxDQUFDLFNBTWhCO1FBUlEsVUFBSSxHQUFXLFNBQVMsQ0FBQTtRQUcvQiwrRUFBK0U7UUFDL0UsOERBQThEO1FBRTlELCtFQUErRTtRQUMvRSxlQUFlLENBQUMsVUFBVSxDQUFDLEtBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFJLENBQUE7O0lBQzlDLENBQUM7SUFSRDtRQURDLG1CQUFtQixDQUFDLFFBQVE7O3lDQUNJO0lBRnRCLE9BQU87UUFEbkIsU0FBUyxDQUFDLGdCQUFnQixFQUFFLFFBQVEsQ0FBQyxhQUFhLENBQUM7O09BQ3ZDLE9BQU8sQ0FXbkI7SUFBRCxjQUFDO0NBQUEsQUFYRCxDQUE2QixXQUFXLEdBV3ZDO1NBWFksT0FBTztBQWFwQjs7R0FFRztBQUVIO0lBQWtDLGdDQUEyQjtJQUczRCxzQkFBWSxRQUFrRDtRQUE5RCxZQUNFLGtCQUFNLFFBQVEsQ0FBQyxTQU1oQjtRQVJRLFVBQUksR0FBVyxjQUFjLENBQUE7UUFHcEMsK0VBQStFO1FBQy9FLDhEQUE4RDtRQUU5RCwrRUFBK0U7UUFDL0UsZUFBZSxDQUFDLFVBQVUsQ0FBQyxLQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSSxDQUFBOztJQUM5QyxDQUFDO0lB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dCB7IENvbXBvbmVudCwgT2JzZXJ2YWJsZUNvbXBvbmVudCB9IGZyb20gJy4uL2Vjcy9Db21wb25lbnQnXG5pbXBvcnQgeyB1dWlkRXZlbnRTeXN0ZW0gfSBmcm9tICcuL1N5c3RlbXMnXG5pbXBvcnQgeyBDTEFTU19JRCwgT25VVUlERXZlbnQsIE9uUG9pbnRlclVVSURFdmVudCB9IGZyb20gJy4vQ29tcG9uZW50cydcbmltcG9ydCB7IEFjdGlvbkJ1dHRvbiB9IGZyb20gJy4vSW5wdXQnXG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5AQ29tcG9uZW50KCdlbmdpbmUub25Gb2N1cycsIENMQVNTX0lELlVVSURfQ0FMTEJBQ0spXG5leHBvcnQgY2xhc3MgT25Gb2N1cyBleHRlbmRzIE9uVVVJREV2ZW50PCdvbkZvY3VzJz4ge1xuICBAT2JzZXJ2YWJsZUNvbXBvbmVudC5yZWFkb25seVxuICByZWFkb25seSB0eXBlOiBzdHJpbmcgPSAnb25Gb2N1cydcbiAgY29uc3RydWN0b3IoY2FsbGJhY2s6IChldmVudDogSUV2ZW50c1snb25Gb2N1cyddKSA9PiB2b2lkKSB7XG4gICAgc3VwZXIoY2FsbGJhY2spXG4gICAgLy8gVGhpcyBpbmplY3Rpb24gaXMgbmVjZXNzYXJ5IE9OTFkgaW4gZXZlbnRzIHRoYXQgYXJlIEFMV0FZUyB0dXJuZWQgb24gYW5kIGFyZVxuICAgIC8vIG5vdCBhc3NpZ25hYmxlIHRvIGVudGl0aWVzLiBMaWtlIGV2ZW50cyBmb3IgdGhlIFVJIGVsZW1lbnRzXG5cbiAgICAvLyBUT0RPKEJyaWFuKTogVGhpcyB3aWxsIGJlIHJlbW92ZWQgd2hlbiBVSSBnZXRzIGJhY2sgdG8gdGhlIGVudGl0eSBwYXJlbnRpbmcuXG4gICAgdXVpZEV2ZW50U3lzdGVtLmhhbmRsZXJNYXBbdGhpcy51dWlkXSA9IHRoaXNcbiAgfVxufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuQENvbXBvbmVudCgnZW5naW5lLm9uVGV4dFN1Ym1pdCcsIENMQVNTX0lELlVVSURfQ0FMTEJBQ0spXG5leHBvcnQgY2xhc3MgT25UZXh0U3VibWl0IGV4dGVuZHMgT25VVUlERXZlbnQ8J29uVGV4dFN1Ym1pdCc+IHtcbiAgQE9ic2VydmFibGVDb21wb25lbnQucmVhZG9ubHlcbiAgcmVhZG9ubHkgdHlwZTogc3RyaW5nID0gJ29uVGV4dFN1Ym1pdCdcbiAgY29uc3RydWN0b3IoY2FsbGJhY2s6IChldmVudDogSUV2ZW50c1snb25UZXh0U3VibWl0J10pID0+IHZvaWQpIHtcbiAgICBzdXBlcihjYWxsYmFjaylcbiAgICAvLyBUaGlzIGluamVjdGlvbiBpcyBuZWNlc3NhcnkgT05MWSBpbiBldmVudHMgdGhhdCBhcmUgQUxXQVlTIHR1cm5lZCBvbiBhbmQgYXJlXG4gICAgLy8gbm90IGFzc2lnbmFibGUgdG8gZW50aXRpZXMuIExpa2UgZXZlbnRzIGZvciB0aGUgVUkgZWxlbWVudHNcblxuICAgIC8vIFRPRE8oQnJpYW4pOiBUaGlzIHdpbGwgYmUgcmVtb3ZlZCB3aGVuIFVJIGdldHMgYmFjayB0byB0aGUgZW50aXR5IHBhcmVudGluZy5cbiAgICB1dWlkRXZlbnRTeXN0ZW0uaGFuZGxlck1hcFt0aGlzLnV1aWRdID0gdGhpc1xuICB9XG59XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5AQ29tcG9uZW50KCdlbmdpbmUub25CbHVyJywgQ0xBU1NfSUQuVVVJRF9DQUxMQkFDSylcbmV4cG9ydCBjbGFzcyBPbkJsdXIgZXh0ZW5kcyBPblVVSURFdmVudDwnb25CbHVyJz4ge1xuICBAT2JzZXJ2YWJsZUNvbXBvbmVudC5yZWFkb25seVxuICByZWFkb25seSB0eXBlOiBzdHJpbmcgPSAnb25CbHVyJ1xuICBjb25zdHJ1Y3RvcihjYWxsYmFjazogKGV2ZW50OiBJRXZlbnRzWydvbkJsdXInXSkgPT4gdm9pZCkge1xuICAgIHN1cGVyKGNhbGxiYWNrKVxuICAgIC8vIFRoaXMgaW5qZWN0aW9uIGlzIG5lY2Vzc2FyeSBPTkxZIGluIGV2ZW50cyB0aGF0IGFyZSBBTFdBWVMgdHVybmVkIG9uIGFuZCBhcmVcbiAgICAvLyBub3QgYXNzaWduYWJsZSB0byBlbnRpdGllcy4gTGlrZSBldmVudHMgZm9yIHRoZSBVSSBlbGVtZW50c1xuXG4gICAgLy8gVE9ETyhCcmlhbik6IFRoaXMgd2lsbCBiZSByZW1vdmVkIHdoZW4gVUkgZ2V0cyBiYWNrIHRvIHRoZSBlbnRpdHkgcGFyZW50aW5nLlxuICAgIHV1aWRFdmVudFN5c3RlbS5oYW5kbGVyTWFwW3RoaXMudXVpZF0gPSB0aGlzXG4gIH1cbn1cblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbkBDb21wb25lbnQoJ2VuZ2luZS5vbkVudGVyJywgQ0xBU1NfSUQuVVVJRF9DQUxMQkFDSylcbmV4cG9ydCBjbGFzcyBPbkVudGVyIGV4dGVuZHMgT25VVUlERXZlbnQ8J29uRW50ZXInPiB7XG4gIEBPYnNlcnZhYmxlQ29tcG9uZW50LnJlYWRvbmx5XG4gIHJlYWRvbmx5IHR5cGU6IHN0cmluZyA9ICdvbkVudGVyJ1xuICBjb25zdHJ1Y3RvcihjYWxsYmFjazogKGV2ZW50OiBJRXZlbnRzWydvbkVudGVyJ10pID0+IHZvaWQpIHtcbiAgICBzdXBlcihjYWxsYmFjaylcbiAgICAvLyBUaGlzIGluamVjdGlvbiBpcyBuZWNlc3NhcnkgT05MWSBpbiBldmVudHMgdGhhdCBhcmUgQUxXQVlTIHR1cm5lZCBvbiBhbmQgYXJlXG4gICAgLy8gbm90IGFzc2lnbmFibGUgdG8gZW50aXRpZXMuIExpa2UgZXZlbnRzIGZvciB0aGUgVUkgZWxlbWVudHNcblxuICAgIC8vIFRPRE8oQnJpYW4pOiBUaGlzIHdpbGwgYmUgcmVtb3ZlZCB3aGVuIFVJIGdldHMgYmFjayB0byB0aGUgZW50aXR5IHBhcmVudGluZy5cbiAgICB1dWlkRXZlbnRTeXN0ZW0uaGFuZGxlck1hcFt0aGlzLnV1aWRdID0gdGhpc1xuICB9XG59XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5AQ29tcG9uZW50KCdlbmdpbmUub25DaGFuZ2UnLCBDTEFTU19JRC5VVUlEX0NBTExCQUNLKVxuZXhwb3J0IGNsYXNzIE9uQ2hhbmdlZCBleHRlbmRzIE9uVVVJREV2ZW50PCdvbkNoYW5nZSc+IHtcbiAgQE9ic2VydmFibGVDb21wb25lbnQucmVhZG9ubHlcbiAgcmVhZG9ubHkgdHlwZTogc3RyaW5nID0gJ29uQ2hhbmdlJ1xuICBjb25zdHJ1Y3RvcihjYWxsYmFjazogKGV2ZW50OiBJRXZlbnRzWydvbkNoYW5nZSddKSA9PiB2b2lkKSB7XG4gICAgc3VwZXIoY2FsbGJhY2spXG4gICAgLy8gVGhpcyBpbmplY3Rpb24gaXMgbmVjZXNzYXJ5IE9OTFkgaW4gZXZlbnRzIHRoYXQgYXJlIEFMV0FZUyB0dXJuZWQgb24gYW5kIGFyZVxuICAgIC8vIG5vdCBhc3NpZ25hYmxlIHRvIGVudGl0aWVzLiBMaWtlIGV2ZW50cyBmb3IgdGhlIFVJIGVsZW1lbnRzXG5cbiAgICAvLyBUT0RPKEJyaWFuKTogVGhpcyB3aWxsIGJlIHJlbW92ZWQgd2hlbiBVSSBnZXRzIGJhY2sgdG8gdGhlIGVudGl0eSBwYXJlbnRpbmcuXG4gICAgdXVpZEV2ZW50U3lzdGVtLmhhbmRsZXJNYXBbdGhpcy51dWlkXSA9IHRoaXNcbiAgfVxufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgT25Qb2ludGVyVVVJREV2ZW50T3B0aW9ucyA9IHtcbiAgYnV0dG9uPzogQWN0aW9uQnV0dG9uXG4gIGhvdmVyVGV4dD86IHN0cmluZ1xuICBzaG93RmVlZGJhY2s/OiBib29sZWFuXG4gIGRpc3RhbmNlPzogbnVtYmVyXG59XG5cbi8qKlxuICogQHB1YmxpYyBAZGVwcmVjYXRlZCB1c2UgYE9uUG9pbnRlckRvd25gIGluc3RlYWRcbiAqL1xuQENvbXBvbmVudCgnZW5naW5lLm9uQ2xpY2snLCBDTEFTU19JRC5VVUlEX0NBTExCQUNLKVxuZXhwb3J0IGNsYXNzIE9uQ2xpY2sgZXh0ZW5kcyBPblBvaW50ZXJVVUlERXZlbnQ8J29uQ2xpY2snPiB7XG4gIEBPYnNlcnZhYmxlQ29tcG9uZW50LnJlYWRvbmx5XG4gIHJlYWRvbmx5IHR5cGU6IHN0cmluZyA9ICdvbkNsaWNrJ1xuXG4gIGNvbnN0cnVjdG9yKGNhbGxiYWNrOiAoZXZlbnQ6IElFdmVudHNbJ29uQ2xpY2snXSkgPT4gdm9pZClcbiAgY29uc3RydWN0b3IoXG4gICAgY2FsbGJhY2s6IChldmVudDogSUV2ZW50c1snb25DbGljayddKSA9PiB2b2lkLFxuICAgIG9wdGlvbnM6IE9uUG9pbnRlclVVSURFdmVudE9wdGlvbnNcbiAgKVxuICBjb25zdHJ1Y3RvcihjYWxsYmFjazogKGV2ZW50OiBJRXZlbnRzWydvbkNsaWNrJ10pID0+IHZvaWQsIG9wdGlvbnM/OiBhbnkpIHtcbiAgICBzdXBlcihjYWxsYmFjaylcbiAgICAvLyBUaGlzIGluamVjdGlvbiBpcyBuZWNlc3NhcnkgT05MWSBpbiBldmVudHMgdGhhdCBhcmUgQUxXQVlTIHR1cm5lZCBvbiBhbmQgYXJlXG4gICAgLy8gbm90IGFzc2lnbmFibGUgdG8gZW50aXRpZXMuIExpa2UgZXZlbnRzIGZvciB0aGUgVUkgZWxlbWVudHNcblxuICAgIC8vIFRPRE8oQnJpYW4pOiBUaGlzIHdpbGwgYmUgcmVtb3ZlZCB3aGVuIFVJIGdldHMgYmFjayB0byB0aGUgZW50aXR5IHBhcmVudGluZy5cbiAgICB1dWlkRXZlbnRTeXN0ZW0uaGFuZGxlck1hcFt0aGlzLnV1aWRdID0gdGhpc1xuXG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuc2hvd0ZlZWRiYWNrID0gIShvcHRpb25zLnNob3dGZWVkYmFjayA9PT0gZmFsc2UpXG5cbiAgICAgIGlmIChvcHRpb25zLmJ1dHRvbikge1xuICAgICAgICB0aGlzLmJ1dHRvbiA9IG9wdGlvbnMuYnV0dG9uXG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLmhvdmVyVGV4dCkge1xuICAgICAgICB0aGlzLmhvdmVyVGV4dCA9IG9wdGlvbnMuaG92ZXJUZXh0XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLmRpc3RhbmNlKSB7XG4gICAgICAgIHRoaXMuZGlzdGFuY2UgPSBvcHRpb25zLmRpc3RhbmNlXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5AQ29tcG9uZW50KCdlbmdpbmUucG9pbnRlckRvd24nLCBDTEFTU19JRC5VVUlEX0NBTExCQUNLKVxuZXhwb3J0IGNsYXNzIE9uUG9pbnRlckRvd24gZXh0ZW5kcyBPblBvaW50ZXJVVUlERXZlbnQ8J3BvaW50ZXJEb3duJz4ge1xuICBAT2JzZXJ2YWJsZUNvbXBvbmVudC5yZWFkb25seVxuICByZWFkb25seSB0eXBlOiBzdHJpbmcgPSAncG9pbnRlckRvd24nXG5cbiAgY29uc3RydWN0b3IoY2FsbGJhY2s6IChldmVudDogSUV2ZW50c1sncG9pbnRlckRvd24nXSkgPT4gdm9pZClcbiAgY29uc3RydWN0b3IoXG4gICAgY2FsbGJhY2s6IChldmVudDogSUV2ZW50c1sncG9pbnRlckRvd24nXSkgPT4gdm9pZCxcbiAgICBvcHRpb25zOiBPblBvaW50ZXJVVUlERXZlbnRPcHRpb25zXG4gIClcbiAgY29uc3RydWN0b3IoXG4gICAgY2FsbGJhY2s6IChldmVudDogSUV2ZW50c1sncG9pbnRlckRvd24nXSkgPT4gdm9pZCxcbiAgICBvcHRpb25zPzogYW55XG4gICkge1xuICAgIHN1cGVyKGNhbGxiYWNrKVxuICAgIC8vIFRoaXMgaW5qZWN0aW9uIGlzIG5lY2Vzc2FyeSBPTkxZIGluIGV2ZW50cyB0aGF0IGFyZSBBTFdBWVMgdHVybmVkIG9uIGFuZCBhcmVcbiAgICAvLyBub3QgYXNzaWduYWJsZSB0byBlbnRpdGllcy4gTGlrZSBldmVudHMgZm9yIHRoZSBVSSBlbGVtZW50c1xuXG4gICAgLy8gVE9ETyhCcmlhbik6IFRoaXMgd2lsbCBiZSByZW1vdmVkIHdoZW4gVUkgZ2V0cyBiYWNrIHRvIHRoZSBlbnRpdHkgcGFyZW50aW5nLlxuICAgIHV1aWRFdmVudFN5c3RlbS5oYW5kbGVyTWFwW3RoaXMudXVpZF0gPSB0aGlzXG5cbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgdGhpcy5zaG93RmVlZGJhY2sgPSAhKG9wdGlvbnMuc2hvd0ZlZWRiYWNrID09PSBmYWxzZSlcblxuICAgICAgaWYgKG9wdGlvbnMuYnV0dG9uKSB7XG4gICAgICAgIHRoaXMuYnV0dG9uID0gb3B0aW9ucy5idXR0b25cbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuaG92ZXJUZXh0KSB7XG4gICAgICAgIHRoaXMuaG92ZXJUZXh0ID0gb3B0aW9ucy5ob3ZlclRleHRcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuZGlzdGFuY2UpIHtcbiAgICAgICAgdGhpcy5kaXN0YW5jZSA9IG9wdGlvbnMuZGlzdGFuY2VcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbkBDb21wb25lbnQoJ2VuZ2luZS5wb2ludGVyVXAnLCBDTEFTU19JRC5VVUlEX0NBTExCQUNLKVxuZXhwb3J0IGNsYXNzIE9uUG9pbnRlclVwIGV4dGVuZHMgT25Qb2ludGVyVVVJREV2ZW50PCdwb2ludGVyVXAnPiB7XG4gIEBPYnNlcnZhYmxlQ29tcG9uZW50LnJlYWRvbmx5XG4gIHJlYWRvbmx5IHR5cGU6IHN0cmluZyA9ICdwb2ludGVyVXAnXG5cbiAgY29uc3RydWN0b3IoY2FsbGJhY2s6IChldmVudDogSUV2ZW50c1sncG9pbnRlclVwJ10pID0+IHZvaWQpXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNhbGxiYWNrOiAoZXZlbnQ6IElFdmVudHNbJ3BvaW50ZXJVcCddKSA9PiB2b2lkLFxuICAgIG9wdGlvbnM6IE9uUG9pbnRlclVVSURFdmVudE9wdGlvbnNcbiAgKVxuICBjb25zdHJ1Y3RvcihjYWxsYmFjazogKGV2ZW50OiBJRXZlbnRzWydwb2ludGVyVXAnXSkgPT4gdm9pZCwgb3B0aW9ucz86IGFueSkge1xuICAgIHN1cGVyKGNhbGxiYWNrKVxuICAgIC8vIFRoaXMgaW5qZWN0aW9uIGlzIG5lY2Vzc2FyeSBPTkxZIGluIGV2ZW50cyB0aGF0IGFyZSBBTFdBWVMgdHVybmVkIG9uIGFuZCBhcmVcbiAgICAvLyBub3QgYXNzaWduYWJsZSB0byBlbnRpdGllcy4gTGlrZSBldmVudHMgZm9yIHRoZSBVSSBlbGVtZW50c1xuXG4gICAgLy8gVE9ETyhCcmlhbik6IFRoaXMgd2lsbCBiZSByZW1vdmVkIHdoZW4gVUkgZ2V0cyBiYWNrIHRvIHRoZSBlbnRpdHkgcGFyZW50aW5nLlxuICAgIHV1aWRFdmVudFN5c3RlbS5oYW5kbGVyTWFwW3RoaXMudXVpZF0gPSB0aGlzXG5cbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgdGhpcy5zaG93RmVlZGJhY2sgPSAhKG9wdGlvbnMuc2hvd0ZlZWRiYWNrID09PSBmYWxzZSlcblxuICAgICAgaWYgKG9wdGlvbnMuYnV0dG9uKSB7XG4gICAgICAgIHRoaXMuYnV0dG9uID0gb3B0aW9ucy5idXR0b25cbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuaG92ZXJUZXh0KSB7XG4gICAgICAgIHRoaXMuaG92ZXJUZXh0ID0gb3B0aW9ucy5ob3ZlclRleHRcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuZGlzdGFuY2UpIHtcbiAgICAgICAgdGhpcy5kaXN0YW5jZSA9IG9wdGlvbnMuZGlzdGFuY2VcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIE9uUG9pbnRlckhvdmVyRW50ZXJVVUlERXZlbnRPcHRpb25zID0ge1xuICBkaXN0YW5jZT86IG51bWJlclxufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuQENvbXBvbmVudCgnZW5naW5lLnBvaW50ZXJIb3ZlckVudGVyJywgQ0xBU1NfSUQuVVVJRF9DQUxMQkFDSylcbmV4cG9ydCBjbGFzcyBPblBvaW50ZXJIb3ZlckVudGVyIGV4dGVuZHMgT25Qb2ludGVyVVVJREV2ZW50PCdwb2ludGVySG92ZXJFbnRlcic+IHtcbiAgQE9ic2VydmFibGVDb21wb25lbnQucmVhZG9ubHlcbiAgcmVhZG9ubHkgdHlwZTogc3RyaW5nID0gJ3BvaW50ZXJIb3ZlckVudGVyJ1xuXG4gIGNvbnN0cnVjdG9yKGNhbGxiYWNrOiAoZXZlbnQ6IElFdmVudHNbJ3BvaW50ZXJIb3ZlckVudGVyJ10pID0+IHZvaWQpXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNhbGxiYWNrOiAoZXZlbnQ6IElFdmVudHNbJ3BvaW50ZXJIb3ZlckVudGVyJ10pID0+IHZvaWQsXG4gICAgb3B0aW9uczogT25Qb2ludGVySG92ZXJFbnRlclVVSURFdmVudE9wdGlvbnNcbiAgKVxuICBjb25zdHJ1Y3RvcihcbiAgICBjYWxsYmFjazogKGV2ZW50OiBJRXZlbnRzWydwb2ludGVySG92ZXJFbnRlciddKSA9PiB2b2lkLFxuICAgIG9wdGlvbnM/OiBhbnlcbiAgKSB7XG4gICAgc3VwZXIoY2FsbGJhY2spXG4gICAgLy8gVGhpcyBpbmplY3Rpb24gaXMgbmVjZXNzYXJ5IE9OTFkgaW4gZXZlbnRzIHRoYXQgYXJlIEFMV0FZUyB0dXJuZWQgb24gYW5kIGFyZVxuICAgIC8vIG5vdCBhc3NpZ25hYmxlIHRvIGVudGl0aWVzLiBMaWtlIGV2ZW50cyBmb3IgdGhlIFVJIGVsZW1lbnRzXG5cbiAgICAvLyBUT0RPKEJyaWFuKTogVGhpcyB3aWxsIGJlIHJlbW92ZWQgd2hlbiBVSSBnZXRzIGJhY2sgdG8gdGhlIGVudGl0eSBwYXJlbnRpbmcuXG4gICAgdXVpZEV2ZW50U3lzdGVtLmhhbmRsZXJNYXBbdGhpcy51dWlkXSA9IHRoaXNcblxuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucy5kaXN0YW5jZSkge1xuICAgICAgICB0aGlzLmRpc3RhbmNlID0gb3B0aW9ucy5kaXN0YW5jZVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuQENvbXBvbmVudCgnZW5naW5lLnBvaW50ZXJIb3ZlckV4aXQnLCBDTEFTU19JRC5VVUlEX0NBTExCQUNLKVxuZXhwb3J0IGNsYXNzIE9uUG9pbnRlckhvdmVyRXhpdCBleHRlbmRzIE9uUG9pbnRlclVVSURFdmVudDwncG9pbnRlckhvdmVyRXhpdCc+IHtcbiAgQE9ic2VydmFibGVDb21wb25lbnQucmVhZG9ubHlcbiAgcmVhZG9ubHkgdHlwZTogc3RyaW5nID0gJ3BvaW50ZXJIb3ZlckV4aXQnXG5cbiAgY29uc3RydWN0b3IoY2FsbGJhY2s6IChldmVudDogSUV2ZW50c1sncG9pbnRlckhvdmVyRXhpdCddKSA9PiB2b2lkKSB7XG4gICAgc3VwZXIoY2FsbGJhY2spXG4gICAgLy8gVGhpcyBpbmplY3Rpb24gaXMgbmVjZXNzYXJ5IE9OTFkgaW4gZXZlbnRzIHRoYXQgYXJlIEFMV0FZUyB0dXJuZWQgb24gYW5kIGFyZVxuICAgIC8vIG5vdCBhc3NpZ25hYmxlIHRvIGVudGl0aWVzLiBMaWtlIGV2ZW50cyBmb3IgdGhlIFVJIGVsZW1lbnRzXG5cbiAgICAvLyBUT0RPKEJyaWFuKTogVGhpcyB3aWxsIGJlIHJlbW92ZWQgd2hlbiBVSSBnZXRzIGJhY2sgdG8gdGhlIGVudGl0eSBwYXJlbnRpbmcuXG4gICAgdXVpZEV2ZW50U3lzdGVtLmhhbmRsZXJNYXBbdGhpcy51dWlkXSA9IHRoaXNcblxuICAgIC8vIENoYW5nZWQgZGVmYXVsdCBkaXN0YW5jZSB2YWx1ZSBmb3IgdGhpcyBjb21wb25lbnQgYmVjYXVzZSBpbiBtb3N0IGNhc2VzIHdlIHByb2JhYmx5XG4gICAgLy8gZG9uJ3Qgd2FudCBmb3IgdGhlIGhvdmVyIGV4aXQgZXZlbnQgdG8gYmUgbGltaXRlZCBieSBhIGRpc3RhbmNlLCBhbmQgaXQgZGVmYXVsdCB2YWx1ZSB3YXMgdG9vIHNtYWxsLlxuICAgIHRoaXMuZGlzdGFuY2UgPSAxNjBcbiAgfVxufVxuIl19